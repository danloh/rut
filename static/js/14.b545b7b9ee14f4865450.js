webpackJsonp([14],{"+yks":function(t,e,o){"use strict";function i(t){o("T7PW")}var s=o("I0E6"),a=o("sybd"),n=o("XyMi"),r=i,l=Object(n.a)(s.a,a.a,a.b,!1,r,"data-v-631eaa26",null);e.a=l.exports},"0FqE":function(t,e,o){e=t.exports=o("FZ+f")(!1),e.push([t.i,".item-sum[data-v-0b40ddf8]{background-color:#fafcfc;min-height:180px;padding:10px 110px 10px 135px;border-bottom:1px solid #eee;position:relative}.item-sum .thumb[data-v-0b40ddf8]{width:120px;height:160px;position:absolute;top:10px;left:2px}.item-sum .info[data-v-0b40ddf8]{font-size:.9em}.item-sum .info .title[data-v-0b40ddf8]{font-size:1.2em;font-weight:700}.item-sum .info .title a[data-v-0b40ddf8]:hover{color:red}.item-sum .info .flag-note[data-v-0b40ddf8]{font-size:.8em;color:gray}.item-sum .operate[data-v-0b40ddf8]{position:absolute;top:10px;right:2px}.el-select[data-v-0b40ddf8]{width:100%}",""])},"32QP":function(t,e,o){e=t.exports=o("FZ+f")(!1),e.push([t.i,".item-list[data-v-631eaa26]{width:100%;margin-top:5px}",""])},"G/o+":function(t,e,o){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"doing";return{name:t+"-items",render:function(e){return e(s.a,{props:{flag:t}})}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var s=o("+yks")},I0E6:function(t,e,o){"use strict";var i=o("Gu7T"),s=o.n(i),a=o("ve4H"),n=o("P9l9");e.a={name:"profile-items",props:{flag:String},data:function(){return{totalItems:0,currentItems:[],currentPage:1}},components:{ItemSum:a.a},computed:{hasMore:function(){return this.currentItems.length<this.totalItems}},methods:{loadItems:function(){var t=this,e=this.flag,o=this.$route.params.id;Object(n.T)(e,o).then(function(e){t.totalItems=e.data.total,t.currentItems=e.data.items})},loadmoreItems:function(){var t=this,e=this.flag,o=this.$route.params.id,i={page:this.currentPage};Object(n.T)(e,o,i).then(function(e){var o;(o=t.currentItems).push.apply(o,s()(e.data.items)),t.currentPage+=1})}},created:function(){this.loadItems()}}},NZYZ:function(t,e,o){"use strict";var i=o("P9l9"),s=o("iF09");e.a={name:"item-sum",props:["item"],data:function(){return{flagAction:"Flag It",flagNote:"",flagTime:"",showDialog:!1,intoForm:{selectRutID:null},showNoteDialog:!1,flagTo:"",noteForm:{note:""},noteRules:{note:[{max:42,message:"Max Length should be 42",trigger:"blur"}]},createdRuts:[]}},computed:{cover:function(){return this.item.cover}},methods:{checkFlaging:function(){var t=this;if(Object(s.a)()){var e=this.item.id||this.$route.params.id;return Object(i.g)(e).then(function(e){t.flagAction=e.data.label,t.flagNote=e.data.note,t.flagTime=e.data.time,t.noteForm.note=e.data.note})}this.flagAction="Flag It",this.flagNote=""},openToFlag:function(t){Object(s.a)()?(this.showNoteDialog=!0,this.flagTo=t):(this.$message({showClose:!0,message:"Should Log in to Access"}),this.$router.push({path:"/login",query:{redirect:this.$route.fullPath}}))},flagSchedule:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o={note:e};return Object(i._7)("todo",this.item.id,o).then(function(){t.flagAction="Scheduled",t.flagNote=e})},flagWorking:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o={note:e};return Object(i._7)("doing",this.item.id,o).then(function(){t.flagAction="Working On",t.flagNote=e})},flagDone:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o={note:e};return Object(i._7)("done",this.item.id,o).then(function(){t.flagAction="Have Done",t.flagNote=e})},flagAddnote:function(t,e){var o=this;this.$refs[t].validate(function(t){if(Object(s.a)()){var i=e.note.trim();switch(o.flagTo){case"schedule":o.flagSchedule(i);break;case"working":o.flagWorking(i);break;case"done":o.flagDone(i)}o.showNoteDialog=!1}else o.$message({showClose:!0,message:"Should Log in to Access"}),o.$router.push({path:"/login",query:{redirect:o.$route.fullPath}})})},showAndloadData:function(){var t=this;if(Object(s.a)()){var e=this.$store.getters.currentUserID;return Object(i.V)("created",e).then(function(e){t.createdRuts=e.data.ruts,t.showDialog=!0})}this.showDialog=!1,this.$message({showClose:!0,message:"Should Log in to Access"}),this.$router.push({path:"/login",query:{redirect:this.$route.fullPath}})},addtoRut:function(t,e){var o=this;if(!e.selectRutID)return this.$message({showClose:!0,message:"Please Select One"}),!1;this.$refs[t].validate(function(t){if(t&&Object(s.a)()){var a=e.selectRutID,n=o.item.id;return Object(i._9)(n,a).then(function(){o.showDialog=!1,o.$message({showClose:!0,message:"Done, and Now You can add Tips",type:"success"}),o.$router.push("/readuplist/"+a)})}Object(s.a)()||(o.showDialog=!1,o.$message({showClose:!0,message:"Should Log in to Access"}),o.$router.push({path:"/login",query:{redirect:o.$route.fullPath}}))})}},created:function(){this.checkFlaging()}}},StWy:function(t,e,o){"use strict";o.d(e,"a",function(){return i}),o.d(e,"b",function(){return s});var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"item-sum"},[o("div",[o("img",{staticClass:"thumb",attrs:{src:t.cover,alt:"Cover"}})]),t._v(" "),o("div",{staticClass:"info"},[o("span",{staticClass:"title"},[t._v("\n      "+t._s(t.item.cate)+" "),o("router-link",{attrs:{to:"/item/"+t.item.id}},[t._v(t._s(t.item.title))])],1),o("br"),t._v(" "),o("span",[o("b",[t._v("Byline:")]),t._v(" "+t._s(t.item.byline)+" ")]),o("br"),t._v(" "),o("span",[o("b",[t._v("Publish:")]),t._v(" "+t._s(t.item.publisher)+" - "+t._s(t.item.pubdate)+" - "+t._s(t.item.language))]),o("br"),t._v(" "),o("span",[o("b",[t._v("UID:")]),t._v(" "+t._s(t.item.uid)+" - "+t._s(t.item.binding)+" - "+t._s(t.item.page)+" "),t.item.resurl?o("a",{attrs:{href:t.item.resurl,target:"_blank"}},[t._v("  :::")]):t._e()]),o("br"),t._v(" "),o("span",[o("b",[t._v("Listed:")]),t._v(" "+t._s(t.item.rutcount)+" ")]),o("br"),t._v(" "),t.flagNote||t.flagTime?o("span",[o("b",[t._v("Note: ")]),t._v(" "),t.flagNote?o("span",{staticClass:"flag-note"},[o("b",[t._v('"')]),t._v(t._s(t.flagNote)),o("b",[t._v('"')])]):t._e(),t._v(" \n      "),t.flagTime?o("span",{staticClass:"flag-note"},[t._v("on "+t._s(t._f("toMDY")(t.flagTime)))]):t._e()]):t._e()]),t._v(" "),o("div",{staticClass:"operate"},[o("el-dropdown",[o("el-button",{attrs:{type:"primary",size:"mini",plain:""}},[t._v(t._s(t.flagAction)),o("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",[o("span",{on:{click:function(e){t.openToFlag("schedule")}}},[t._v("Schedule")])]),t._v(" "),o("el-dropdown-item",[o("span",{on:{click:function(e){t.openToFlag("working")}}},[t._v("Working On")])]),t._v(" "),o("el-dropdown-item",[o("span",{on:{click:function(e){t.openToFlag("done")}}},[t._v("Have Done")])]),t._v(" "),o("el-dropdown-item",{attrs:{divided:""}},[o("span",{on:{click:t.showAndloadData}},[t._v("Add to List")])])],1)],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"Add Item to Created List",visible:t.showDialog,width:"45%"},on:{"update:visible":function(e){t.showDialog=e}}},[o("el-form",{ref:"intoForm",attrs:{model:t.intoForm}},[o("el-form-item",{attrs:{prop:"rut"}},[o("el-select",{model:{value:t.intoForm.selectRutID,callback:function(e){t.$set(t.intoForm,"selectRutID",e)},expression:"intoForm.selectRutID"}},t._l(t.createdRuts,function(t){return o("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"mini"},on:{click:function(e){t.showDialog=!1}}},[t._v("Cancel")]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){t.addtoRut("intoForm",t.intoForm)}}},[t._v("Add")])],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"Add Note and Flag It",visible:t.showNoteDialog,width:"35%"},on:{"update:visible":function(e){t.showNoteDialog=e}}},[o("el-form",{ref:"noteForm",attrs:{model:t.noteForm,rules:t.noteRules}},[o("el-form-item",{attrs:{prop:"note"}},[o("el-input",{attrs:{placeholder:"Optional, Max 42 words"},model:{value:t.noteForm.note,callback:function(e){t.$set(t.noteForm,"note",e)},expression:"noteForm.note"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){t.flagAddnote("noteForm",t.noteForm)}}},[t._v("Done")])],1)],1)],1)},s=[]},T7PW:function(t,e,o){var i=o("32QP");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o("rjj0")("1b96a915",i,!0,{})},cPg9:function(t,e,o){var i=o("0FqE");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o("rjj0")("36f64f60",i,!0,{})},sybd:function(t,e,o){"use strict";o.d(e,"a",function(){return i}),o.d(e,"b",function(){return s});var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b",[t._v(t._s(t.flag.toUpperCase())+" "+t._s(t.totalItems))]),t._v(" "),o("div",{staticClass:"item-list"},[t._l(t.currentItems,function(t){return o("item-sum",{key:t.id,attrs:{item:t}})}),t._v(" "),t.hasMore?o("div",[o("el-button",{staticClass:"blockbtn",attrs:{size:"mini",disabled:!t.hasMore},on:{click:t.loadmoreItems}},[t._v("Show More")])],1):t._e()],2)])},s=[]},ve4H:function(t,e,o){"use strict";function i(t){o("cPg9")}var s=o("NZYZ"),a=o("StWy"),n=o("XyMi"),r=i,l=Object(n.a)(s.a,a.a,a.b,!1,r,"data-v-0b40ddf8",null);e.a=l.exports}});